<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <meta name="description" content="Closure Library">
    <meta name="author" content="Sebastian Poręba">

    <meta charset='utf-8'>
    <script src='slides.js'></script>
    <title>Closure Library - Sebastian Poręba</title>

  
  <style>
    
    .prettyprint .red .typ, .prettyprint .red .atn, .prettyprint .red .dec, .prettyprint .red .kwd,
    .prettyprint .red .var, .prettyprint .red .str, .prettyprint .red .pun, .prettyprint .red .pln {
      color: #f00 !important;
    }
    
  </style>
  </head>
  <body style='display: none'>
  <script type="text/javascript">

//    var _gaq = _gaq || [];
//    _gaq.push(['_setAccount', 'UA-17195095-1']);
//    _gaq.push(['_trackPageview']);

//    (function() {
//      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
//      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
//      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
//    })();

  </script>
    <section class='slides layout-regular template-default'>

      <article>
        <h1>
          Closure Library, Compiler and Plovr
        </h1>
        <p>
          Sebastian Poręba
          <br>
          27th June 2011
        </p>
      </article>
      
	  <article>
		<h2>What makes web slow?</h2>
	  </article>
	  
	  <article>
		<h2>Page load time = code download + code parsing + code execution</h2>
	  </article>
	  
	  <article>
		<h2>Moore's law doesn't apply to programmers.</h2>
	  </article>
	  
	  <article>
          <h2>Writing fast code requires a lot of effort!</h2>
	  </article>

	  <article>
		<h2>JavaScript has its quirks = even more work</h2>
	  </article>	 
	  
	  <article>
		<h2>How to improve development time and application performance?</h2>
	  </article>
	  
	  <article>
		<h2>Automated code processing and optimization!</h2>
		
		<ul>
			<li>CoffeeScript</li>
			<li>LASS, SASS</li>
			<li>Code minifiers</li>
			<li>JSLint, JSHint</li>
			<li>Unit testing</li>
		</ul>
	  </article>
	  
	  <article>
		<h2>Google Closure is a complete toolchain for building big, fast applications with less effort</li>
	  </article>

	  <article>
		<h1>Closure Compiler</h1>
	  </article>

      <article>
        <h3>Easy modules</h3>

<pre>
    goog.provide('my.delicious.Cookie');
</pre>

<pre>
    goog.require('goog.dom');
    goog.require('goog.net.xhrio');
</pre>
      </article>

      <article>
        <h3>closurebuilder.py scans your project to find all dependiences</h3>
        <img class="centered big" style="margin-top: 50px !important; height: 80%;" src="images/calcdeps-1.jpg">
      </article>
            
      <article>
        <h3>closurebuilder.py scans your project to find all dependiences</h3>
        <img class="centered big" style="margin-top: 50px !important; height: 80%;" src="images/calcdeps-2.jpg">
      </article>
      
      <article>
        <h3>closurebuilder.py scans your project to find all dependiences</h3>
        <img class="centered big" style="margin-top: 50px !important; height: 80%;" src="images/calcdeps-3.jpg">
      </article>

      <article>
        <h3>treeshaking</h3>
        <img class="centered big" style="margin-top: 50px !important; height: 50%;" src="images/gcc-advanced-deps.jpg">
      </article>

      <article>
        <h3>treeshaking</h3>
        <img class="centered big" style="margin-top: 50px !important; height: 50%;" src="images/gcc-advanced-deps-optimized.jpg">
      </article>

      <article>
          <h2>The Closure Way - use as bloated structure as it suits you, then optimize like crazy</h2>
      </article>

      <article>
          <h2>Is it hard to configure?</h2>
      </article>

      <article>
          <h2>Demo time!</h2>
      </article>

      <article>
          <h3>No JS demo</h3>

          First load:
          <ul>
              <li>JS - 0kB/0ms</li>
              <li>HTML - 216kB/600ms</li>
          </ul>

          Page load:
          <ul>
              <li>JS - 0kB/0ms</li>
              <li>HTML - 216kB/600ms</li>
          </ul>
      </article>

      <article>
          <h3>jQuery pagination demo</h3>

          First load:
          <ul>
              <li>JS - 93kB/920ms</li>
              <li>HTML - 3+215kB/700ms</li>
          </ul>

          Page load:
          <ul>
              <li>HTML - 215kB/350ms</li>
          </ul>
      </article>

      <article>
          <h3>jQuery pagination demo</h3>
<pre>
$(document).ready(function() {
    var loaddata = function(e) {
        $('#table-contents').load('/index/paginationhtml');
        if(e) {
            e.preventDefault();
        }
        return false;
    };
    $('#next-page').click(loaddata);
    loaddata();
});
</pre>
      </article>

      <article>
          <h3>Google Closure pagination demo</h3>

          First load:
          <ul>
              <li>JS - 910kB/8500ms</li>
              <li>HTML - 3+215kB/700ms</li>
          </ul>

          Page load:
          <ul>
              <li>HTML - 215kB/350ms</li>
          </ul>
      </article>

      <article>
          <h3>Google Closure pagination demo</h3>

<pre>
/**
 * @constructor
 */
prezentacja.Start1 = function() {
var button = goog.dom.getElement('next-page');
var table = goog.dom.getElement('table-contents');

/**
 * @type {prezentacja.Loader}
 * @private
 */
this.loader_ = new prezentacja.Loader();

goog.events.listen(button, goog.events.EventType.CLICK, function(e) {
    this.loader_.loadNewPageHtml(table);
    e.preventDefault();
}, false, this);

this.loader_.loadNewPageHtml(table);
};
</pre>
      </article>
      <article>
          <h3>Google Closure pagination demo</h3>

<pre>
/**
 * @constructor
 */
prezentacja.Loader = function() {};

prezentacja.Loader.prototype.loadNewPageHtml = function(target) {
var xhr_ = new goog.net.XhrIo();

goog.events.listen(xhr_, goog.net.EventType.COMPLETE, function(e) {
    var html = this.getResponseText();
    target.innerHTML = html;
});

xhr_.send('/index/paginationhtml');
};
</pre>
      </article>

	  <article>
		<h3>Plovr config - simple</h3>
<pre>
{
  "id": "prezentacja",
  "paths": "src",
  "externs": [
    "externs/browser.js"
  ],
  "closure-library": "closure/closure/goog/",

  "inputs": "src/start-1.js",

  "mode": "RAW",
  "level": "VERBOSE",

  "checks": {
    "deprecated": "ERROR",
    "checkTypes": "ERROR",
    "nonStandardJsDocs": "ERROR"
  }
}
</pre>
	  </article>


      <article>
          <h3>Google Closure compiled pagination demo</h3>

          First load:
          <ul>
              <li class="red">JS - 19kB/350ms</li>
              <li>HTML - 3+215kB/700ms</li>
          </ul>

          Page load:
          <ul>
              <li>HTML - 215kB/350ms</li>
          </ul>
      </article>

      <article>
          <h2>So much better than jQuery!</h2>
      </article>

      <article>
		<h3>Plovr config - advanced compilation</h3>
<pre>
{
  "id": "prezentacja2",
  "paths": "src",
  "externs": [
    "externs/browser.js"
  ],
  "closure-library": "closure/closure/goog/",

  "inputs": "src/start-1.js",
<span class="red">
  "mode": "ADVANCED",
  "level": "QUIET",
</span>
  "checks": {
    "deprecated": "ERROR",
    "checkTypes": "ERROR",
    "nonStandardJsDocs": "ERROR"
  }
}
</pre>
	  </article>


      <article>
          <h3>Google Closure compiled + soy demo</h3>

          First load:
          <ul>
              <li>JS - 21kB/270ms</li>
              <li>JSON - 38kB/300ms</li>
              <li>HTML - 3/470ms</li>
          </ul>

          Page load:
          <ul>
              <li class="red">JSON - 38kB/300ms</li>
          </ul>
      </article>

      <article>
          <h3>Google Closure compiled + soy demo</h3>

<pre>
prezentacja.Loader.prototype.loadNewPageJSON = function(target) {
var xhr_ = new goog.net.XhrIo();

goog.events.listen(xhr_, goog.net.EventType.COMPLETE, function(e) {
var json = this.getResponseJson();
<span class="red">
var translated_json = prezentacja.Model.getInstance().importer(json);
</span>
target.innerHTML = prezentacja.templates.Table.table({
    data: translated_json
});
});

xhr_.send('/index/paginationjson');
};
</pre>
      </article>

      <article>
          <h3>Google Closure compiled + soy demo</h3>

<pre>
/**
* @param {Array.<Array>} rawData
* @return {Array.<{name: string, address: string, www: string,
* email: string, leg_count: number}>}
*/
prezentacja.Model.prototype.importer = function(rawData) {
    var result = [];
    for(var i = 0; i < rawData.length; i++) {
        result[i] = {
            name: rawData[i]["name"],
            address: rawData[i]["address"],
            www: rawData[i]["www"],
            email: rawData[i]["email"],
            leg_count: parseInt(rawData[i]["leg_count"], 10)
        };
    }
    return result;
};
</pre>
      </article>


      <article>
          <h3>Google Closure compiled + soy demo</h3>

<pre>
prezentacja.Loader.prototype.loadNewPageJSON = function(target) {
var xhr_ = new goog.net.XhrIo();

goog.events.listen(xhr_, goog.net.EventType.COMPLETE, function(e) {
var json = this.getResponseJson();

var translated_json = prezentacja.Model.getInstance().importer(json);
<span class="red">
target.innerHTML = prezentacja.templates.Table.table({
    data: translated_json
});
</span>
});

xhr_.send('/index/paginationjson');
};
</pre>
      </article>

      <article>
          <h3>Google Closure compiled + soy demo</h3>

<pre>
{namespace prezentacja.templates.Table}

/**
* @param data
*/
{template .table}
    {foreach $row in $data}
    &lt;tr class="{if index($row) % 2 == 0}even{else}odd{/if}"&gt;
        {call .renderrow}
        {param row: $row /}
        {/call}
    &lt;/tr&gt;
    {/foreach}
{/template}
</pre>
      </article>


      <article>
          <h3>Google Closure compiled + soy demo</h3>
<pre>
/**
* @param row
*/
{template .renderrow private="true"}
    &lt;td&gt;{$row.name}&lt;/td&gt;
    &lt;td&gt;{$row.address}&lt;/td&gt;
    &lt;td&gt;
        &lt;a href="{$row.www}"&gt;
            &lt;img src="/img/icons/icon_vcard.gif" alt="{$row.www}"&gt;
            {$row.www}
        &lt;/a&gt;
    &lt;/td&gt;
    ...
{/template}
</pre>
      </article>

	  <article>
		<h3>Plovr config - simple</h3>
<pre>
{
  "id": "prezentacja3",
  "paths": "src",
  "externs": [
    "externs/browser.js"
  ],
  "closure-library": "closure/closure/goog/",

  "inputs": "src/start-2.js",
<span class="red">
  "soy-function-plugins": "org.plovr.soy.function.PlovrModule",
</span>
  "mode": "ADVANCED",
  "level": "VERBOSE",

  "checks": {
    "deprecated": "ERROR",
    "checkTypes": "ERROR",
    "nonStandardJsDocs": "ERROR"
  }
}

</pre>
	  </article>

      <article>
          <h3>Everyone loves charts!</h3>
          <img class="centered big" style="margin-top: 50px !important; height: 50%;" src="images/total_initial_size.png">
      </article>

      <article>
          <h3>Everyone loves charts!</h3>
          <img class="centered big" style="margin-top: 50px !important; height: 50%;" src="images/total_initial_time.png">
      </article>

      <article>
          <h3>Everyone loves charts!</h3>
          <img class="centered big" style="margin-top: 50px !important; height: 50%;" src="images/total_page_size.png">
      </article>

      <article>
          <h3>Everyone loves charts!</h3>
          <img class="centered big" style="margin-top: 50px !important; height: 50%;" src="images/total_page_time.png">
      </article>

      <article>
        <div style="text-align:center">
          <h1>That's all folks!</h1>
          <br>
          <img src="images/smashinglabs.png"><br>
          <a href="http://www.smashinglabs.pl">www.smashinglabs.pl</a><br>
          <a href="https://twitter.com/#!/fridek">#fridek</a>
        </div>
      </article>   
    
      <article>
        <h2>Questions?</h2>
      </article>
  </body>
</html>
